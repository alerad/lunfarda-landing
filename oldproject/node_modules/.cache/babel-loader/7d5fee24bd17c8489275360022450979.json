{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ale\\\\Documents\\\\workspace\\\\lunfarda-landing\\\\src\\\\components\\\\tours\\\\TourList.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { BookTour } from \"./BookTour\";\nimport { BokunRequest } from \"../../services/BokunService\";\nexport const TourList = props => {\n  const [bokunResponse, setBokunResponse] = useState([]);\n  const [allItems, setAllItems] = useState([]);\n  useEffect(() => {\n    if (bokunResponse.length == 0) {\n      BokunRequest(\"/activity.json/search\").then(x => {\n        setAllItems(x.items);\n        console.log(x);\n        setResponse(x.items);\n      });\n    }\n  }, []);\n  useEffect(() => {\n    setResponse(allItems);\n  }, [props.filters]);\n\n  const setResponse = items => {\n    if (props.filters && props.filters.length > 0) {\n      const lowerFilters = props.filters.map(x => x.toLowerCase());\n      const filtered = items.filter(item => {\n        const keywords = item.keywords.map(y => y.toLowerCase());\n        return keywords.some(r => lowerFilters.includes(r));\n      });\n      setBokunResponse(filtered);\n    } else {\n      setBokunResponse(items);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    xs: 12,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, bokunResponse.map(x => {\n    return /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(BookTour, {\n      tour: x,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 25\n      }\n    }));\n  }));\n};","map":{"version":3,"sources":["C:/Users/Ale/Documents/workspace/lunfarda-landing/src/components/tours/TourList.tsx"],"names":["React","useEffect","useState","Grid","BookTour","BokunRequest","TourList","props","bokunResponse","setBokunResponse","allItems","setAllItems","length","then","x","items","console","log","setResponse","filters","lowerFilters","map","toLowerCase","filtered","filter","item","keywords","y","some","r","includes"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,IAAR,QAAmB,mBAAnB;AACA,SAAQC,QAAR,QAAuB,YAAvB;AACA,SAAQC,YAAR,QAA2B,6BAA3B;AAOA,OAAO,MAAMC,QAAkC,GAAIC,KAAD,IAAW;AACzD,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCP,QAAQ,CAAC,EAAD,CAAlD;AAEA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIO,aAAa,CAACI,MAAd,IAAwB,CAA5B,EAA+B;AAC3BP,MAAAA,YAAY,CAAC,uBAAD,CAAZ,CAAsCQ,IAAtC,CAA2CC,CAAC,IAAI;AAC5CH,QAAAA,WAAW,CAACG,CAAC,CAACC,KAAH,CAAX;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,CAAZ;AACAI,QAAAA,WAAW,CAACJ,CAAC,CAACC,KAAH,CAAX;AACH,OAJD;AAKH;AACJ,GARQ,EAQN,EARM,CAAT;AAUAd,EAAAA,SAAS,CAAE,MAAM;AACbiB,IAAAA,WAAW,CAACR,QAAD,CAAX;AACH,GAFQ,EAEP,CAACH,KAAK,CAACY,OAAP,CAFO,CAAT;;AAIA,QAAMD,WAAW,GAAIH,KAAD,IAAgB;AAChC,QAAIR,KAAK,CAACY,OAAN,IAAiBZ,KAAK,CAACY,OAAN,CAAcP,MAAd,GAAuB,CAA5C,EAA+C;AAC3C,YAAMQ,YAAY,GAAGb,KAAK,CAACY,OAAN,CAAcE,GAAd,CAAkBP,CAAC,IAAIA,CAAC,CAACQ,WAAF,EAAvB,CAArB;AAEA,YAAMC,QAAQ,GAAGR,KAAK,CAACS,MAAN,CAAcC,IAAD,IAAe;AACzC,cAAMC,QAAQ,GAAGD,IAAI,CAACC,QAAL,CAAcL,GAAd,CAAmBM,CAAD,IAAcA,CAAC,CAACL,WAAF,EAAhC,CAAjB;AACA,eAAOI,QAAQ,CAACE,IAAT,CAAeC,CAAD,IAAUT,YAAY,CAACU,QAAb,CAAsBD,CAAtB,CAAxB,CAAP;AACH,OAHgB,CAAjB;AAIApB,MAAAA,gBAAgB,CAACc,QAAD,CAAhB;AACH,KARD,MAQO;AACHd,MAAAA,gBAAgB,CAACM,KAAD,CAAhB;AACH;AACJ,GAZD;;AAcA,sBACI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,SAAS,MAApB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,OAAO,EAAE,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKP,aAAa,CAACa,GAAd,CAAkBP,CAAC,IAAI;AACpB,wBACI,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAmB,MAAA,EAAE,EAAE,CAAvB;AAA0B,MAAA,EAAE,EAAE,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAEA,CAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAKH,GANA,CADL,CADJ;AAYH,CA7CM","sourcesContent":["import React, {useEffect, useState} from \"react\"\r\nimport {Grid} from \"@material-ui/core\";\r\nimport {BookTour} from \"./BookTour\";\r\nimport {BokunRequest} from \"../../services/BokunService\";\r\n\r\ninterface TourListProps {\r\n    filters?: string[]\r\n}\r\n\r\n\r\nexport const TourList : React.FC<TourListProps> = (props) => {\r\n    const [bokunResponse, setBokunResponse] = useState([]);\r\n\r\n    const [allItems, setAllItems] = useState([])\r\n\r\n    useEffect(() => {\r\n        if (bokunResponse.length == 0) {\r\n            BokunRequest(\"/activity.json/search\").then(x => {\r\n                setAllItems(x.items)\r\n                console.log(x)\r\n                setResponse(x.items)\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    useEffect( () => {\r\n        setResponse(allItems)\r\n    },[props.filters])\r\n\r\n    const setResponse = (items: any) => {\r\n        if (props.filters && props.filters.length > 0) {\r\n            const lowerFilters = props.filters.map(x => x.toLowerCase());\r\n\r\n            const filtered = items.filter((item: any) => {\r\n                const keywords = item.keywords.map((y:string) => y.toLowerCase());\r\n                return keywords.some((r:any)=> lowerFilters.includes(r))\r\n            })\r\n            setBokunResponse(filtered)\r\n        } else {\r\n            setBokunResponse(items)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Grid item container xs={12} spacing={2}>\r\n            {bokunResponse.map(x => {\r\n                return (\r\n                    <Grid item xs={12} sm={6} md={4}>\r\n                        <BookTour tour={x}/>\r\n                    </Grid>\r\n                )\r\n            })}\r\n        </Grid>\r\n    )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}