{"ast":null,"code":"import crypto from 'crypto';\nconst accessToken = '45d22b4402b74d65b5868880b1859bf5';\nconst secret = '763b9a4766994940b553be7cb4d82ec8';\n\nconst CreateSignature = (endpoint, requestType) => {\n  const signatureString = formattedDate() + accessToken + requestType + endpoint;\n  return crypto.createHmac('sha1', secret).update(signatureString).digest('base64');\n};\n\nexport const BokunRequest = path => {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Bokun-Date': formattedDate(),\n      'X-Bokun-AccessKey': accessToken,\n      'X-Bokun-Signature': CreateSignature(path, \"POST\")\n    },\n    body: JSON.stringify({\n      \"page\": 1,\n      \"pageSize\": 40,\n      \"participants\": 1\n    })\n  };\n  return fetch('https://api.bokun.is/activity.json/search', requestOptions).then(response => response.json()).catch(x => {\n    console.log(\"Bokun error \");\n    console.log(x);\n  });\n};\nexport const AddBokunScript = () => {\n  const script = document.createElement(\"script\");\n  script.src = \"https://widgets.bokun.io/assets/javascripts/apps/build/BokunWidgetsLoader.js?bookingChannelUUID=f950a4c9-7805-4ef9-ac32-a3f40fc83793\";\n  script.async = true;\n  script.type = 'text/javascript';\n  document.body.appendChild(script);\n};\n\nconst formattedDate = () => {\n  var d = new Date(),\n      month = '' + (d.getMonth() + 1),\n      day = '' + d.getDate(),\n      hh = ' ' + d.getHours() + 3,\n      mm = '' + d.getMinutes(),\n      ss = '' + d.getSeconds(),\n      year = d.getFullYear();\n  if (month.length < 2) month = '0' + month;\n  if (day.length < 2) day = '0' + day;\n  return [year, month, day].join('-') + [hh, mm, ss].join(':');\n};","map":{"version":3,"sources":["C:/Users/Ale/Documents/workspace/lunfarda-landing/src/services/BokunService.tsx"],"names":["crypto","accessToken","secret","CreateSignature","endpoint","requestType","signatureString","formattedDate","createHmac","update","digest","BokunRequest","path","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","catch","x","console","log","AddBokunScript","script","document","createElement","src","async","type","appendChild","d","Date","month","getMonth","day","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","year","getFullYear","length","join"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AAEA,MAAMC,WAAW,GAAG,kCAApB;AACA,MAAMC,MAAM,GAAG,kCAAf;;AAEA,MAAMC,eAAe,GAAG,CAACC,QAAD,EAAmBC,WAAnB,KAA2C;AAC/D,QAAMC,eAAe,GAAGC,aAAa,KAAGN,WAAhB,GAA4BI,WAA5B,GAAwCD,QAAhE;AACA,SAAOJ,MAAM,CAACQ,UAAP,CAAkB,MAAlB,EAA0BN,MAA1B,EACFO,MADE,CACKH,eADL,EAEFI,MAFE,CAEK,QAFL,CAAP;AAGH,CALD;;AAOA,OAAO,MAAMC,YAAY,GAAIC,IAAD,IAAkB;AAE1C,QAAMC,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,sBAAiBR,aAAa,EAFzB;AAGL,2BAAqBN,WAHhB;AAIL,2BAAqBE,eAAe,CAACS,IAAD,EAAO,MAAP;AAJ/B,KAFU;AASnBI,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACb,cAAQ,CADK;AAEb,kBAAY,EAFC;AAGb,sBAAgB;AAHH,KAAf;AATa,GAAvB;AAiBA,SAAOC,KAAK,CAAC,2CAAD,EAA8CN,cAA9C,CAAL,CACFO,IADE,CACGC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADf,EAEFC,KAFE,CAEIC,CAAC,IAAI;AAERC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,GANE,CAAP;AAOH,CA1BM;AA4BP,OAAO,MAAMG,cAAc,GAAG,MAAM;AAChC,QAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AAEAF,EAAAA,MAAM,CAACG,GAAP,GAAa,sIAAb;AACAH,EAAAA,MAAM,CAACI,KAAP,GAAe,IAAf;AACAJ,EAAAA,MAAM,CAACK,IAAP,GAAc,iBAAd;AAEAJ,EAAAA,QAAQ,CAACb,IAAT,CAAckB,WAAd,CAA0BN,MAA1B;AACH,CARM;;AAUP,MAAMrB,aAAa,GAAG,MAAM;AACxB,MAAI4B,CAAC,GAAG,IAAIC,IAAJ,EAAR;AAAA,MACIC,KAAK,GAAG,MAAMF,CAAC,CAACG,QAAF,KAAe,CAArB,CADZ;AAAA,MAEIC,GAAG,GAAG,KAAKJ,CAAC,CAACK,OAAF,EAFf;AAAA,MAGIC,EAAE,GAAG,MAAMN,CAAC,CAACO,QAAF,EAAN,GAAqB,CAH9B;AAAA,MAIIC,EAAE,GAAG,KAAKR,CAAC,CAACS,UAAF,EAJd;AAAA,MAKIC,EAAE,GAAG,KAAKV,CAAC,CAACW,UAAF,EALd;AAAA,MAMIC,IAAI,GAAGZ,CAAC,CAACa,WAAF,EANX;AAQA,MAAIX,KAAK,CAACY,MAAN,GAAe,CAAnB,EACIZ,KAAK,GAAG,MAAMA,KAAd;AACJ,MAAIE,GAAG,CAACU,MAAJ,GAAa,CAAjB,EACIV,GAAG,GAAG,MAAMA,GAAZ;AAEJ,SAAO,CAACQ,IAAD,EAAOV,KAAP,EAAcE,GAAd,EAAmBW,IAAnB,CAAwB,GAAxB,IAA+B,CAACT,EAAD,EAAIE,EAAJ,EAAOE,EAAP,EAAWK,IAAX,CAAgB,GAAhB,CAAtC;AACH,CAfD","sourcesContent":["import crypto from 'crypto'\r\n\r\nconst accessToken = '45d22b4402b74d65b5868880b1859bf5'\r\nconst secret = '763b9a4766994940b553be7cb4d82ec8'\r\n\r\nconst CreateSignature = (endpoint: string, requestType: string) => {\r\n    const signatureString = formattedDate()+accessToken+requestType+endpoint\r\n    return crypto.createHmac('sha1', secret)\r\n        .update(signatureString)\r\n        .digest('base64')\r\n}\r\n\r\nexport const BokunRequest = (path: string) => {\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'X-Bokun-Date' : formattedDate(),\r\n            'X-Bokun-AccessKey': accessToken,\r\n            'X-Bokun-Signature': CreateSignature(path, \"POST\")\r\n\r\n        },\r\n        body: JSON.stringify({\r\n                \"page\": 1,\r\n                \"pageSize\": 40,\r\n                \"participants\": 1\r\n        }\r\n        )\r\n    };\r\n\r\n    return fetch('https://api.bokun.is/activity.json/search', requestOptions)\r\n        .then(response => response.json())\r\n        .catch(x => {\r\n\r\n            console.log(\"Bokun error \")\r\n            console.log(x)\r\n        });\r\n}\r\n\r\nexport const AddBokunScript = () => {\r\n    const script = document.createElement(\"script\");\r\n\r\n    script.src = \"https://widgets.bokun.io/assets/javascripts/apps/build/BokunWidgetsLoader.js?bookingChannelUUID=f950a4c9-7805-4ef9-ac32-a3f40fc83793\";\r\n    script.async = true;\r\n    script.type = 'text/javascript'\r\n\r\n    document.body.appendChild(script);\r\n}\r\n\r\nconst formattedDate = () => {\r\n    var d = new Date(),\r\n        month = '' + (d.getMonth() + 1),\r\n        day = '' + d.getDate(),\r\n        hh = ' ' + d.getHours() + 3,\r\n        mm = '' + d.getMinutes(),\r\n        ss = '' + d.getSeconds(),\r\n        year = d.getFullYear();\r\n\r\n    if (month.length < 2)\r\n        month = '0' + month;\r\n    if (day.length < 2)\r\n        day = '0' + day;\r\n\r\n    return [year, month, day].join('-') + [hh,mm,ss].join(':');\r\n}\r\n"]},"metadata":{},"sourceType":"module"}